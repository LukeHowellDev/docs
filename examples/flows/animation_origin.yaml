appId: org.nativescript.examplesApp
---
- launchApp:
    permissions:
      android.permission.DUMP: allow
- waitForAnimationToEnd
- openLink: ns-examples://enableDemoMode
- runScript: animation_origin.js
- runFlow:
    when:
      platform: android
    commands:
      - evalScript: ${output.platform = 'android'}
- runFlow:
    when:
      platform: ios
    commands:
      - evalScript: ${output.platform = 'ios'}

- openLink: ns-examples://navigate/ViewOrigin
- repeat:
    while:
      true: ${(output.current = output.origins.shift()) !== undefined}
    commands:
      - tapOn:
          text: ${output.current}
          retryTapIfNoChange: false
      - startRecording: ../content/assets/videos/${output.platform}/animation_origin__${output.current.replace(' / ', '_')}
      - tapOn:
          text: 'Play'
          retryTapIfNoChange: false
      - waitForAnimationToEnd:
          timeout: 5000
      # to delay the recording end.
      # - tapOn:
      #     text: ${output.current}
      #     retryTapIfNoChange: false
      - stopRecording
- openLink: ns-examples://disableDemoMode
